# CH08 상속과 다형성

## 상속이란
- 상위클래스는 하위클래스보다 일반적인 의미를 가짐
- 하위클래스는 상위클래스보다 구체적인 의미를 가짐
- 클래스를 정의할 때 이미 구현된 클래스를 상속(inheritance)받아서 속성이나 기능이 확장되는 클래스를 구현함
- 상속하는 클래스
    - 상위클래스, parent class, base class, super class
- 상속받는 클래스 
    - 하위클래스, child class, derived class, subclass

```java
class B extends A{}
//A클래스가 B클래스에게 상속한다.
//B클래스가 A클래스를 상속받는다.
```

## 상속을 활용한 고객관리 프로그램
- 고객의 정보를 활용하여 고객 맞춤 서비스를 구현
- 고객의 등급에 따라 차별화 된 할인율과 포인트를 지급
- 등급에 따른 클래스를 따로 구현하는 것이 아닌 일반적인 클래스를 먼저 구현하고 그보다 기능이 많은 클래스는 상속을 활용하여 구현함

## 접근 제한자 가시성
| | 외부클래스 | 하위클래스 | 동일패키지 | 내부클래스 |
|:---:|:---:|:---:|:---:|:---:|
| public | O | O | O | O |
| protected | X | O | O | O |
| default(선언되지 않음) | X | X | O | O |
| private | X | X | X | O |   
   
## 상속에서 클래스 생성 과정
- 하위 클래스가 생성될 때 상위 클래스가 먼저 생성됨
- 상위 클래스의 생성자가 호출되고 하위 클래스의 생성자가 호출됨
- 하위 클래스의 생성자에서는 무조건 상위 클래스의 생성자가 호출되어야함
- 아무것도 없는 경우 컴파일러는 상위 클래스 기본 생성자를 호출하기 위한 super()를 코드에 넣어줌
- super() 호출되는 생성자는 상위 클래스의 기본 생성자임
- 만약 상위 클래스의 기본생성자가 없는 경우(매개변수가 있는 생성자만 존재하는 경우) 하위 클래스는 명시적으로 상위 클래스로 호출해야함

## 상속에서의 메모리 상태
- 상위 클래스의 인스턴스가 먼저 생성이 되고 하위 클래스의 인스턴스가 생성됨

## super 예약어
- this가 자기 자신의 인스턴스의 주소를 가지는 것처럼 super는 하위 클래스가 상위 클래스에 대한 주소를 가지게 됨
- 하위 클래스가 상위 클래스에 접근할 때 사용할 수 있음

## 상위 클래스로의 묵시적 형 변환(업캐스팅)
- 상위 클래스 형으로 변수를 선언하고 하위 클래스 인스턴스를 생성할 수 있음
- 하위 클래스는 상위 클래스의 타입을 내포하고 있으므로 상위 클래스로 묵시적 형변환이 가능함

## 메서드 오버라이딩(overriding)
- 상위클래스에 정의된 메서드 중 하위 클래스와 기능이 맞지 않거나 추가 기능이 필요한 경우 같은 이름과 매개변수로 하위 클래스에서 재정의함

## 가상 메서드(virtual method)
- 프로그램에서 어떤 객체의 변수나 메서드의 참조는 그 타입에 따라 이루어짐, 가상 메서드의 경우는 타입과 상관없이 실제 생성된 인스턴스의 메서드가 호출되는 원리

## 다형성(polymorphism)
- 하나의 코드가 여러가지 자료형으로 구현되어 실행되는 것
- 정보은닉, 상속과 더불어 객체지향 프로그래밍의 가장 큰 특징 중하나
- 객체지향 프로그래밍의 유연성, 재활용성, 유지보수성에 기본이 되는 특징임

## 다형성 구현하기
- 하나의 클래스를 상속받은 여러 클래스가 있는 경우
- 각 클래스마다 같은 이름의 서로 다른 메서드를 재정의함
- 상위 클래스 타입으로 선언된 하나의 변수가 여러 인스턴스에 대입되어 다양한 구현이 실행될 수 있음

## 상속을 언제 사용할까?
- 여러 클래스를 생성하지 않고 하나의 클래스에 공통적인 요소를 모으고 나머지 클래스는 이를 상속받은 다음 각각 필요한 특성과 메서드를 구현하는 방법
- 하나의 클래스에 여러 특성을 한꺼번에 구현하는 경우 많은 코드 내에 많은 if문이 생길 수 있음

--- 

- IS-A 관계(is a relationship : inheritance)
    - 일반적인(general)개념과 구체적인(specific)개념과의 관계
    - 상위 클래스: 일반적인 개념 클래스
    - 하위 클래스: 구체적인 개념 클래스
    - 단순히 코드를 재사용하는 목적으로 사용하지 않음

- HAS-A 관계(composition) 
    - 한 클래스가 다른 클래스를 소유한 관계
    - 코드 재사용의 한 방법

## 다운 캐스팅 - instanceof
- 하위 클래스가 상위 클래스로 형 변환 되는 것은 묵시적으로 이루어짐
- 다시 원래 자료 형인 하위클래스로 형 변환 하려면 명시적으로 다운 캐스팅을 해야함
- istanceof : 원래 인스턴스의 타입을 체크하는 예약어 

